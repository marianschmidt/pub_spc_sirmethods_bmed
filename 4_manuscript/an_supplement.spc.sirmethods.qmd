---
title: "Supplementary Material for the paper 'Improving the Risk Estimation for Second Primary Lung Cancer after Lung Cancer by Taking Tumor Histology into Account'"
date: last-modified
date-format: DD MMMM YYYY
title-block-banner: true
toc: true
authors:
- name: Marian Eberl
  address: Chair of Epidemiology, TUM School of Medicine and Health, Technical
    University of Munich, Munich, Germany
  email: marian.eberl@tum.de
- name: Luana F. Tanaka
  address: Chair of Epidemiology, TUM School of Medicine and Health, Technical
    University of Munich, Munich, Germany
- name: Klaus Kraywinkel
  address: Robert Koch-Institut, Zentrum f√ºr Krebsregisterdaten, Berlin
- name: Stefanie J. Klug
  address: Chair of Epidemiology, TUM School of Medicine and Health, Technical
    University of Munich, Munich, Germany
format:
 html: 
    echo: false
    embed-resources: true
    self-contained-math: true
    df-print: paged
 docx: 
    echo: false
    toc: true
keywords:
- lung cancer
- second primary cancer
- cancer registry data
- cancer epidemiology
- standardized incidence ratio
number-sections: false
bibliography: pub_spc_sirmethods.bib
csl: bmc-medicine.csl
---

```{r}
#| label: setup
#| include: false

#----- Set basic parameters

##---- Files
here::i_am("4_manuscript/an_supplement.spc.sirmethods.qmd")

reload_workspace       <- TRUE # if TRUE, the analysis workspace will be
                              # reloaded, if FALSE, then prep chunk eval = FALSE
input_dir_tables       <- here::here("3_output/all_figs_tabs")
input_an_workspace     <- here::here("3_output/01.an_workspace.RData")
output_dir_tables      <- here::here("3_output")

##---- Packages
load_packages          <- c("knitr", "gt", "tidyverse", "patchwork")
add_required_packages  <- c("here", "testthat", "gtExtras", "ggblanket", "svglite") 

### Check if required packages are installed
invisible(find.package(c(load_packages, add_required_packages)))
#if the above fails, run 
#renv::install(c("here", "testthat", "patchwork", "svglite", "gtExtras", "ggblanket"))

### Load packages
invisible(lapply(load_packages, library, character.only = TRUE))


##---- Options
### Set global options
options(nwarnings = 10000)
testthat::local_edition(3)

### Other parameters
en_gb <- FALSE        #if true, use British English where applicable
ref_iarc_def   <- "7"   #number of reference for IARC Working Group 2005 to manually add to gt table
ref_seer_def   <- "8"   #number of reference for Johnson 2008
ref_barclay    <- "5"   #number of reference for Barclay 2019
ref_fritz_iarc <- "17"  #number of reference for Fritz 2013 (IARC ICD-O-3, rev 1)
alpha          <- 0.05         #standard alpha error used for manual CI calculations

```

```{r}
#| label: prep-workspace
#| include: false

### Load workspace if needed
if(reload_workspace){lapply(input_an_workspace, load, environment())}

```

```{r}
#| label: prep-color
#| eval: false
#| echo: false

##---- Color Palettes

#for color selection
#c4a_gui()
#colorspace::hcl_palettes(plot = TRUE)

c4a("wes.zissou1", 11)
 [1] "#3B9AB2" "#53A5B9" "#6BB1C1" "#8FBBA5" "#BDC367" "#EBCC2A" "#E6C019" "#E3B408" "#E49100" "#EB5500" "#F21A00"

> c4a("hcl.yellow_purple", 11)
 [1] "#F5F2D8" "#DDEDC4" "#B9E5B9" "#8DDAB7" "#5ECBBB" "#34B8C0" "#31A0C2" "#5384BE" "#7262B2" "#833C97" "#80146E"
```

```{r}
#| label: prep-dictionary
#| include: false

dic_tumor      <- if(en_gb){"tumour"}else{"tumor"}
```

# Online Reource - Supplement S1-S12 {#supp}

Supplementary information for the paper 

*"Histology-specific standardized incidence ratio improves the estimation of second primary lung cancer risk"*

Authors: Eberl M, Tanaka LF, Kraywinkel K, Klug SJ

Correspondence: Marian Eberl, marian.eberl@tum.de, Chair of Epidemiology, TUM School of Medicine and Health, Technical University of Munich, Munich, Germany


## S1. Table: Comparison of IARC/IACR and SEER multiple primary rules {#supp-def}


```{r}
#| label: tab-supp_def
#| warning: false

if(knitr::pandoc_to("docx")){
  
  supp_tab_def$`_heading`$subtitle
  
  knitr::include_graphics(file.path(input_dir_tables, "supp_tab_def.png"))
  
}else{
   
  #print table
  supp_tab_def_gt
  
}
```


